# üìß **MailBot** *Cliente Python para e-mails otimizado*

Este m√≥dulo permite o envio de e-mails com ou sem anexos usando a API do Gmail com autentica√ß√£o OAuth2 do Google. √â compat√≠vel com envio de anexos locais, anexos em mem√≥ria (`BytesIO`) e m√∫ltiplos arquivos PDF.

---

## üì¶ Requisitos

üöÄ Instala√ß√£o do m√≥dulo

```bash
pip install git+https://github.com/bvlxtelli/MailBot.git
```

Instale as depend√™ncias com:

```bash
pip install --upgrade google-api-python-client google-auth google-auth-oauthlib
```

---

## üìÅ Estrutura esperada

O m√≥dulo espera os arquivos de credenciais do Google:

```
credentials/
‚îú‚îÄ‚îÄ client_secret.json   # fornecido pelo Google Cloud
‚îî‚îÄ‚îÄ token.json           # gerado automaticamente ap√≥s o primeiro login
```

- `client_secret.json`: Baixe em [console.cloud.google.com](https://console.cloud.google.com/) ao criar um OAuth Client ID
- `token.json`: Gerado automaticamente ap√≥s o fluxo de autentica√ß√£o

---

## üöÄ Como usar

### 1. **Importe e fa√ßa login no servi√ßo do Gmail**

```python
from seu_modulo import login, enviar_email

service = login()
```

---

### 2. **Envie um e-mail simples**

```python
enviar_email(
    service=service,
    destinatario="exemplo@dominio.com",
    assunto="Teste",
    corpo="Ol√°! Esse √© um e-mail enviado via API.",
)
```

---

### 3. **Com anexo local**

```python
enviar_email(
    service=service,
    destinatario="exemplo@dominio.com",
    assunto="Relat√≥rio",
    corpo="Segue em anexo.",
    caminho_anexo="relatorios/relatorio.pdf"
)
```

---

### 4. **Com anexo em mem√≥ria (`BytesIO`)**

```python
from io import BytesIO

buffer = BytesIO()
buffer.write(b"PDF fake aqui")  # simule um PDF
buffer.seek(0)

enviar_email(
    service=service,
    destinatario="exemplo@dominio.com",
    assunto="Relat√≥rio Gerado",
    corpo="Segue o PDF em mem√≥ria.",
    anexo_buffer=buffer,
    nome_anexo="meu_arquivo.pdf"
)
```

---

### 5. **Com m√∫ltiplos anexos (`dict` com buffers)**

```python
from io import BytesIO

anexos = {
    "arquivo1.pdf": BytesIO(b"conteudo1"),
    "arquivo2.pdf": BytesIO(b"conteudo2"),
}

for buf in anexos.values():
    buf.seek(0)

enviar_email(
    service=service,
    destinatario="exemplo@dominio.com",
    assunto="M√∫ltiplos relat√≥rios",
    corpo="Segue mais de um anexo.",
    multiplos_anexos=anexos
)
```

---

### 6. **Enviar conte√∫do HTML (opcional)**

```python
enviar_email(
    service=service,
    destinatario="exemplo@dominio.com",
    assunto="E-mail com HTML",
    corpo="<h1>Ol√°!</h1><p>Este √© um e-mail com <b>HTML</b>.</p>",
    html=True
)
```

---

## üìù Logs

O m√≥dulo usa `logging` para registrar eventos importantes. Para ativar logs no seu script principal:

```python
import logging

logging.basicConfig(level=logging.INFO)
```

---

## ‚úÖ Escopos utilizados

Este m√≥dulo usa os seguintes escopos da API Gmail:

- `https://mail.google.com/`
- `https://www.googleapis.com/auth/gmail.send`
- `https://www.googleapis.com/auth/gmail.compose`
- `https://www.googleapis.com/auth/gmail.modify`

---

## üõ°Ô∏è Seguran√ßa

- Nunca compartilhe seu `client_secret.json` ou `token.json`.
- Use vari√°veis de ambiente ou `gitignore` para evitar vazamento dos arquivos de credenciais.

---

## üìÑ Licen√ßa

Distribu√≠do sob a licen√ßa privada interna. Qualquer redistribui√ß√£o e utiliza√ß√£o sem autoriza√ß√£o √© estritamente proibida.